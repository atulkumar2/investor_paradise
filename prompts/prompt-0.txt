"""
GITHUB COPILOT – PLEASE GENERATE CODE FOR THIS REQUEST

Context
- This repo is a Google ADK (Agent Development Kit) project.
- There is a `data/` folder containing NSE cash-market (CM) historical files.
- For now, ignore any news / PDFs. Only work with NSE CM data.
- Use Python and pandas. Assume files in `data/` are CSV or Parquet.
- Columns are similar to NSE bhavcopy: SYMBOL, DATE/TIMESTAMP, OPEN, HIGH, LOW, CLOSE, TOTTRDQTY, TOTTRDVAL, etc.

Goal
Create a minimal agent app that:
1. Loads NSE CM data from the `data/` folder.
2. Exposes a few clean tools (functions) that ADK can call, for example:
   - list_available_dates() -> list of trading dates found in the files.
   - list_symbols(date: str) -> list of symbols traded on a given date.
   - get_ohlc_history(symbol: str, start_date: str | None, end_date: str | None) -> summary of OHLC + volume.
   - summarize_symbol(symbol: str, start_date: str | None, end_date: str | None) -> dict with:
        - first_close, last_close
        - absolute_return, percent_return
        - max_close, min_close
        - average_volume, total_traded_value
3. Wrap these functions as ADK tools (using whatever tool pattern / decorator is standard in this project).
4. Define a single agent that:
   - Can call these tools.
   - Takes a natural-language question like:
       "Summarize TCS between 2022-01-01 and 2022-12-31"
       "What were the top 10 most traded symbols on 2023-01-02 by value?"
   - Plans which tool(s) to call.
   - Returns a human-readable answer using the tool results.

Implementation details
- Use pandas for loading / filtering data.
- Implement a small data-loader layer that:
   - Scans the `data/` folder once.
   - Caches loaded DataFrames per file so repeated calls are fast.
   - Handles both CSV and Parquet if present.
- Add simple helpers for:
   - parsing dates from strings (YYYY-MM-DD),
   - validating symbol existence,
   - raising friendly errors when data is missing.
- In `if __name__ == "__main__":`
   - Read a natural-language query from the command line (argument or stdin).
   - Create and run an ADK task for the agent.
   - Print the final response to stdout.

Code style
- Use type hints and docstrings, especially on tool functions so the LLM knows what each tool does.
- Keep things modular:
   - data loading helpers
   - tool functions
   - agent/ADK wiring
- Don’t touch pyproject.toml; assume dependencies are already set up.

Please generate the full `main.py` implementation that satisfies the above.
"""
